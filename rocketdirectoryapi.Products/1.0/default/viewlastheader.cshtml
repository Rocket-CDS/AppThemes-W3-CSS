@inherits RocketDirectoryAPI.Components.RocketDirectoryAPITokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;
@using RocketPortal.Components;
@using RocketDirectoryAPI.Components;
@using DNNrocketAPI.Components;
@AssignDataModel(Model)

@if (articleData != null && articleData.Exists && portalContent.SearchModuleId == moduleData.ModuleId)
{
    var productImg = "";
    var img = articleData.GetImage(0);
    var dictParams = new Dictionary<string, string>();
    dictParams.Add("articleid", articleData.ArticleId.ToString());

    if (img != null)
    {
        productImg = img.RelPath;
    }
    <!-- JSON-LD markup generated by Google's structured data markup help tool -->
    <script type="application/ld+json">
        {
        "@@context" : "http://schema.org",
        "@@type" : "Product",
        "name" : "@(articleData.Name.Replace("\"", ""))",
        "image" : "@(portalData.EngineUrlWithProtocol)@(productImg)",
        "description" : "@(articleData.Summary.Replace("\"", ""))",
        "url" : "@DNNrocketUtils.NavigateURL(moduleData.DetailPageTabId(), dictParams, articleData.Name),
        "brand" : {
        "@@type" : "Brand",
        "name" : "@(articleData.Info.GetXmlProperty("genxml/textbox/brand").Replace("\"", ""))"
        },
        "offers" : {
        "@@type" : "Offer",
        "price" : "@(articleData.Info.GetXmlProperty("genxml/textbox/bestprice"))",
        "priceCurrency": "@portalContent.CurrencyCode"
        }
        }
    </script>
}

